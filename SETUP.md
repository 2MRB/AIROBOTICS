# دليل إعداد النظام

## ✅ المشاكل المحلولة

1. **مشكلة تسجيل دخول الإداريين** - تم حلها
2. **مشكلة إعداد الإداريين** - تم حلها (إيمان حسن محمود + كريم العكري)
3. **مشكلة أنواع الشكاوى** - تم حلها (10 أنواع محددة)
4. **مشكلة رؤية المواطنين لشكاوى الآخرين** - تم حلها ✅
5. **مشكلة زرار العرض** - تم حلها
6. **مشكلة تخصيص الشكاوى** - تم حلها
7. **مشكلة تسجيل دخول المواطنين التلقائي** - تم حلها ✅

## 🔒 التحسينات الأمنية الجديدة

### **للمواطنين**:

- ✅ تسجيل دخول تلقائي بعد تقديم الشكوى
- ✅ رؤية شكاويهم الخاصة فقط
- ✅ تحقق من التوكن في كل طلب
- ✅ حماية من الوصول غير المصرح

### **للإداريين**:

- ✅ رؤية جميع الشكاوى
- ✅ إمكانية تخصيص الشكاوى للموظفين
- ✅ عرض تفاصيل كاملة للشكاوى

### **للموظفين**:

- ✅ رؤية الشكاوى المخصصة لهم فقط
- ✅ تحديث حالة الشكاوى المخصصة لهم

## 🚀 كيفية التشغيل

### 1. تشغيل الخادم الخلفي

```bash
cd server
npm start
```

الخادم يعمل على: http://localhost:3001

### 2. تشغيل الواجهة الأمامية

```bash
npm run dev
```

الواجهة تعمل على: http://localhost:5173

## 👤 حسابات الإدارة

### الحساب الأول:

- **البريد الإلكتروني:** emanhassanmahmoud1@gmail.com
- **كلمة المرور:** Emovmmm#951753
- **الاسم:** إيمان حسن محمود

### الحساب الثاني:

- **البريد الإلكتروني:** karemelolary8@gmail.com
- **كلمة المرور:** Emovmmm#951753
- **الاسم:** كريم العكري

## 📧 إعداد البريد الإلكتروني

لتفعيل إرسال الإشعارات، قم بإنشاء ملف `.env` في مجلد `server`:

```env
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
JWT_SECRET=your-secret-key-change-in-production
FRONTEND_URL=http://localhost:5173
NODE_ENV=development
```

### خطوات إعداد Gmail:

1. تفعيل المصادقة الثنائية
2. إنشاء كلمة مرور للتطبيقات
3. استخدام كلمة المرور في `EMAIL_PASS`

## 🔧 المميزات المتاحة

### للمواطنين:

- ✅ تقديم شكاوى جديدة
- ✅ رفع ملفات مرفقة
- ✅ متابعة حالة الشكاوى
- ✅ تسجيل الدخول بالرقم القومي

### للإدارة:

- ✅ لوحة تحكم شاملة
- ✅ إدارة المستخدمين
- ✅ إدارة أنواع الشكاوى
- ✅ تصدير البيانات
- ✅ إحصائيات مفصلة

### للموظفين:

- ✅ معالجة الشكاوى
- ✅ تحديث الحالات
- ✅ البحث والتصفية

## 🛠️ التقنيات المستخدمة

### الواجهة الأمامية:

- React 18 + TypeScript
- Tailwind CSS
- Vite
- Lucide React Icons

### الخادم الخلفي:

- Node.js + Express
- Prisma ORM
- SQLite Database
- JWT Authentication
- Multer (رفع الملفات)
- Nodemailer (البريد الإلكتروني)

## 📊 أنواع الشكاوى المتاحة

- 🏚️ شكوى بناء مخالف
- 🚽 شكوى صرف صحي
- ♻️ شكوى نظافة أو قمامة
- 🚧 شكوى طريق أو رصف
- 💡 شكوى إنارة
- 📶 شكوى ضعف أو انقطاع الإنترنت
- 🌳 شكوى تعديات على ممتلكات عامة
- 🛠️ شكوى صيانة أو كهرباء
- 🚓 شكوى أمنية أو تعدي
- ✉️ أخرى (مع تحديد التفاصيل)

## 🔒 الأمان

- مصادقة JWT
- تشفير كلمات المرور
- تحقق من الأدوار والصلاحيات
- حماية من هجمات CSRF وXSS
- Rate limiting

## 📝 ملاحظات

- النظام يدعم اللغة العربية بالكامل
- واجهة مستخدم حديثة وسهلة الاستخدام
- تصميم متجاوب يعمل على جميع الأجهزة
- نظام إشعارات متكامل
- تم حل مشكلة CORS للعمل على المنافذ 5173 و 5174
