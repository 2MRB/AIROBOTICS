# نظام إدارة الشكاوى البلدية - مجلس مدينة أبوتيج 🏛️

نظام متكامل لإدارة الشكاوى البلدية يوفر واجهات سهلة الاستخدام للمواطنين والموظفين والإدارة.

## الميزات الرئيسية ✨

### 👥 لوحة تحكم المواطنين

- **تقديم شكاوى جديدة** مع دعم الملفات المرفقة (صور، PDF)
- **تتبع حالة الشكاوى** في الوقت الفعلي
- **مركز الإشعارات** للتحديثات والرسائل
- **عرض سجل الشكاوى** مع التفاصيل الكاملة
- **تحديث البيانات الشخصية**

### 👨‍💼 لوحة تحكم الموظفين

- **إدارة الشكاوى المخصصة** للموظف
- **تحديث حالة الشكاوى** مع إضافة ملاحظات داخلية
- **إضافة تعليقات وتحديثات** للشكاوى
- **فلترة وبحث متقدم** في الشكاوى
- **تصدير البيانات** بصيغة Excel/CSV

### 👑 لوحة تحكم الإدارة

- **إدارة المستخدمين** (إضافة، تعديل، حذف)
- **إدارة أنواع الشكاوى** مع الأيقونات والوصف
- **تقارير وإحصائيات شاملة** للنظام
- **إعدادات البريد الإلكتروني** والإشعارات
- **مراقبة أداء النظام** والاستخدام

## أنواع الشكاوى المدعومة 🏠

| النوع                        | الأيقونة | الوصف                                  |
| ---------------------------- | -------- | -------------------------------------- |
| شكوى بناء مخالف              | 🏚️       | بناء بدون ترخيص أو مخالف للقوانين      |
| شكوى صرف صحي                 | 🚽       | مشاكل في شبكة الصرف الصحي              |
| شكوى نظافة أو قمامة          | ♻️       | تراكم القمامة أو عدم النظافة           |
| شكوى طريق أو رصف             | 🚧       | تلف في الطرق أو الأرصفة                |
| شكوى إنارة                   | 💡       | مشاكل في الإنارة العامة                |
| شكوى ضعف أو انقطاع الإنترنت  | 📶       | ضعف أو انقطاع الإنترنت / الشبكة        |
| شكوى تعديات على ممتلكات عامة | 🌳       | تعديات على الأراضي أو الممتلكات العامة |
| شكوى صيانة أو كهرباء         | 🛠️       | مشاكل في الصيانة أو الكهرباء           |
| شكوى أمنية أو تعدي           | 🚓       | مشاكل أمنية أو تعديات                  |
| أخرى                         | ✉️       | شكاوى أخرى مع تحديد التفاصيل           |

## التقنيات المستخدمة 🛠️

### Backend

- **Node.js** مع Express.js
- **Prisma ORM** مع SQLite
- **JWT** للمصادقة
- **Multer** لرفع الملفات
- **Nodemailer** لإرسال البريد الإلكتروني
- **XLSX** لتصدير البيانات

### Frontend

- **React** مع TypeScript
- **Tailwind CSS** للتصميم
- **Lucide React** للأيقونات
- **Vite** كأداة بناء

### الأمان

- **Helmet** لحماية HTTP headers
- **Rate Limiting** لمنع الهجمات
- **CORS** للتحكم في الوصول
- **Input Validation** للبيانات
- **Role-Based Access Control (RBAC)**

## التثبيت والتشغيل 🚀

### المتطلبات

- Node.js 16+
- npm أو yarn

### خطوات التثبيت

1. **استنساخ المشروع**

```bash
git clone <repository-url>
cd project
```

2. **تثبيت التبعيات**

```bash
# تثبيت تبعيات Frontend
npm install

# تثبيت تبعيات Backend
cd server
npm install
cd ..
```

3. **إعداد قاعدة البيانات**

```bash
cd server
npx prisma generate
npx prisma db push
npx prisma db seed
cd ..
```

4. **إعداد متغيرات البيئة**

```bash
# إنشاء ملف .env في مجلد server
cp .env.example .env

# تعديل المتغيرات حسب الحاجة
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
JWT_SECRET=your-secret-key
```

5. **تشغيل النظام**

```bash
# تشغيل Backend
cd server
npm start

# في terminal جديد - تشغيل Frontend
npm run dev
```

## الحسابات الافتراضية 🔑

### حساب الإدارة

- **البريد الإلكتروني:** emanhassanmahmoud1@gmail.com
- **كلمة المرور:** Emovmmm#951753

### حساب الإدارة الثاني

- **البريد الإلكتروني:** karemelolary8@gmail.com
- **كلمة المرور:** Emovmmm#951753

## الميزات الجديدة المضافة ✨

### 📧 نظام الإشعارات

- **إشعارات البريد الإلكتروني** للشكاوى الجديدة
- **تحديثات حالة الشكاوى** للمواطنين
- **مركز الإشعارات** في الواجهة

### 📊 التصدير والتقارير

- **تصدير Excel** مع فلترة متقدمة
- **تصدير CSV** للبيانات
- **تقارير إحصائية** شاملة

### 🔧 إدارة الإعدادات

- **إعدادات البريد الإلكتروني** مع الاختبار
- **إعدادات النظام** العامة
- **مراقبة أداء النظام**

### 🛡️ الأمان والتحقق

- **تحقق من صحة البيانات** المدخلة
- **حماية من الهجمات** الشائعة
- **تحكم في الوصول** حسب الدور

## هيكل المشروع 📁

```
project/
├── src/                    # Frontend React
│   ├── components/         # مكونات React
│   ├── contexts/          # React Contexts
│   └── main.tsx           # نقطة البداية
├── server/                # Backend Node.js
│   ├── routes/            # مسارات API
│   ├── middleware/        # Middleware
│   ├── utils/             # أدوات مساعدة
│   └── uploads/           # الملفات المرفوعة
├── prisma/                # قاعدة البيانات
│   ├── schema.prisma      # مخطط قاعدة البيانات
│   └── seed.cjs           # البيانات الأولية
└── public/                # الملفات العامة
```

## API Endpoints 📡

### المصادقة

- `POST /api/auth/login` - تسجيل الدخول
- `POST /api/auth/verify-citizen` - التحقق من المواطن

### الشكاوى

- `GET /api/complaints` - جلب الشكاوى
- `POST /api/complaints/submit` - تقديم شكوى جديدة
- `PUT /api/complaints/:id/status` - تحديث حالة الشكوى
- `GET /api/complaints/export/excel` - تصدير Excel
- `GET /api/complaints/export/csv` - تصدير CSV

### المستخدمين

- `GET /api/users` - جلب المستخدمين (Admin)
- `POST /api/users` - إنشاء مستخدم جديد (Admin)

### أنواع الشكاوى

- `GET /api/types` - جلب أنواع الشكاوى
- `POST /api/types` - إنشاء نوع جديد (Admin)

### الإشعارات

- `GET /api/notifications` - جلب الإشعارات
- `PUT /api/notifications/:id/read` - تحديد كمقروء

### الإعدادات

- `GET /api/settings` - جلب الإعدادات (Admin)
- `PATCH /api/settings/email` - تحديث إعدادات البريد (Admin)

## المساهمة 🤝

نرحب بالمساهمات! يرجى اتباع الخطوات التالية:

1. Fork المشروع
2. إنشاء branch جديد للميزة
3. Commit التغييرات
4. Push إلى Branch
5. إنشاء Pull Request

## الترخيص 📄

هذا المشروع مرخص تحت رخصة MIT.

## الدعم 💬

للحصول على الدعم أو الإبلاغ عن مشاكل:

- إنشاء Issue في GitHub
- التواصل مع فريق التطوير

---

**مجلس مدينة أبوتيج** - خدمة المواطنين أولوية 🏛️
